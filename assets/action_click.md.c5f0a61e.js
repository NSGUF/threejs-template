import{_ as s,c as n,o as a,a as p}from"./app.2a831956.js";const E=JSON.parse('{"title":"\u83B7\u53D6\u5BF9\u5E94\u4F4D\u7F6E\u76843D\u5BF9\u8C61","description":"","frontmatter":{},"headers":[],"relativePath":"action/click.md","lastUpdated":1692236508000}'),l={name:"action/click.md"},o=p(`<h1 id="\u83B7\u53D6\u5BF9\u5E94\u4F4D\u7F6E\u76843d\u5BF9\u8C61" tabindex="-1">\u83B7\u53D6\u5BF9\u5E94\u4F4D\u7F6E\u76843D\u5BF9\u8C61</h1><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki vp-code-dark"><code><span class="line"></span>
<span class="line"><span style="color:#8B949E;">/**</span></span>
<span class="line"><span style="color:#8B949E;"> * \u901A\u8FC7\u9F20\u6807\u4F4D\u7F6E\u83B7\u53D6\u9F20\u6807\u5BF9\u5E94\u4F4D\u7F6E\u76843d\u7269\u4F53\u5BF9\u8C61</span></span>
<span class="line"><span style="color:#8B949E;"> * </span><span style="color:#FF7B72;">@param</span><span style="color:#8B949E;"> </span><span style="color:#C9D1D9;">ev</span><span style="color:#8B949E;"> \u9F20\u6807\u65F6\u95F4</span></span>
<span class="line"><span style="color:#8B949E;"> * </span><span style="color:#FF7B72;">@param</span><span style="color:#8B949E;"> </span><span style="color:#C9D1D9;">app</span></span>
<span class="line"><span style="color:#8B949E;"> * </span><span style="color:#FF7B72;">@return</span><span style="color:#8B949E;"> </span><span style="color:#FFA657;">{*}</span></span>
<span class="line"><span style="color:#8B949E;"> */</span></span>
<span class="line"><span style="color:#FF7B72;">function</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">getObjByMouse</span><span style="color:#C9D1D9;"> (</span><span style="color:#FFA657;">ev</span><span style="color:#C9D1D9;">, </span><span style="color:#FFA657;">app</span><span style="color:#C9D1D9;">) {</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">let</span><span style="color:#C9D1D9;"> { x, y } </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> app.renderer.domElement.</span><span style="color:#D2A8FF;">getBoundingClientRect</span><span style="color:#C9D1D9;">();</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">let</span><span style="color:#C9D1D9;"> mouseX </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> ((ev.clientX </span><span style="color:#FF7B72;">-</span><span style="color:#C9D1D9;"> x) </span><span style="color:#FF7B72;">/</span><span style="color:#C9D1D9;"> app.renderer.domElement.clientWidth) </span><span style="color:#FF7B72;">*</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">2</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">-</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">1</span><span style="color:#C9D1D9;">;</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">let</span><span style="color:#C9D1D9;"> mouseY </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">-</span><span style="color:#C9D1D9;">((ev.clientY </span><span style="color:#FF7B72;">-</span><span style="color:#C9D1D9;"> y) </span><span style="color:#FF7B72;">/</span><span style="color:#C9D1D9;"> app.renderer.domElement.clientHeight) </span><span style="color:#FF7B72;">*</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">2</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">+</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">1</span><span style="color:#C9D1D9;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">let</span><span style="color:#C9D1D9;"> raycaster;</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">if</span><span style="color:#C9D1D9;"> (app.camera.type </span><span style="color:#FF7B72;">===</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">CAMERA_TYPE</span><span style="color:#C9D1D9;">.OrthographicCamera) {</span></span>
<span class="line"><span style="color:#C9D1D9;">        </span><span style="color:#FF7B72;">let</span><span style="color:#C9D1D9;"> vector2 </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">new</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">THREE</span><span style="color:#C9D1D9;">.</span><span style="color:#D2A8FF;">Vector2</span><span style="color:#C9D1D9;">(mouseX, mouseY);</span></span>
<span class="line"><span style="color:#C9D1D9;">        raycaster </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">new</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">THREE</span><span style="color:#C9D1D9;">.</span><span style="color:#D2A8FF;">Raycaster</span><span style="color:#C9D1D9;">();</span></span>
<span class="line"><span style="color:#C9D1D9;">        raycaster.</span><span style="color:#D2A8FF;">setFromCamera</span><span style="color:#C9D1D9;">(vector2, app.camera);</span></span>
<span class="line"><span style="color:#C9D1D9;">    } </span><span style="color:#FF7B72;">else</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">if</span><span style="color:#C9D1D9;"> (app.camera.type </span><span style="color:#FF7B72;">===</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">CAMERA_TYPE</span><span style="color:#C9D1D9;">.PerspectiveCamera) {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C9D1D9;">        </span><span style="color:#8B949E;">// \u5148\u6C72\u53D6\u5C4F\u5E55\u4E0A\u70B9\u51FB\u7684\u4F4D\u7F6E\u521B\u5EFA\u4E00\u4E2A\u5411\u91CF</span></span>
<span class="line"><span style="color:#C9D1D9;">        </span><span style="color:#FF7B72;">let</span><span style="color:#C9D1D9;"> vector3 </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">new</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">THREE</span><span style="color:#C9D1D9;">.</span><span style="color:#D2A8FF;">Vector3</span><span style="color:#C9D1D9;">(mouseX, mouseY, </span><span style="color:#79C0FF;">0.5</span><span style="color:#C9D1D9;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C9D1D9;">        </span><span style="color:#8B949E;">// \u7136\u540E\u7528unproject\u51FD\u6570\u5C06\u70B9\u51FB\u4F4D\u7F6E\u53D1\u5C04\u5149\u7EBF</span></span>
<span class="line"><span style="color:#C9D1D9;">        vector3 </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> vector3.</span><span style="color:#D2A8FF;">unproject</span><span style="color:#C9D1D9;">(app.camera);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C9D1D9;">        </span><span style="color:#8B949E;">// \u7528THREE.Raycaster \u5BF9\u8C61\u5411\u70B9\u51FB\u4F4D\u7F6E\u53D1\u5C04\u5149\u7EBF</span></span>
<span class="line"><span style="color:#C9D1D9;">        raycaster </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">new</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">THREE</span><span style="color:#C9D1D9;">.</span><span style="color:#D2A8FF;">Raycaster</span><span style="color:#C9D1D9;">(app.camera.position, vector3.</span><span style="color:#D2A8FF;">sub</span><span style="color:#C9D1D9;">(app.camera.position).</span><span style="color:#D2A8FF;">normalize</span><span style="color:#C9D1D9;">());</span></span>
<span class="line"><span style="color:#C9D1D9;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#8B949E;">// \u8BA1\u7B97\u5C04\u7EBF\u76F8\u673A\u5230\u7684\u5BF9\u8C61\uFF0C\u53EF\u80FD\u6709\u591A\u4E2A\u5BF9\u8C61\uFF0C\u56E0\u6B64\u8FD4\u56DE\u662F\u4E00\u4E2A\u6570\u7EC4\uFF0C\u6309\u79BB\u76F8\u673A\u8FDC\u8FD1\u6392\u5217</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#8B949E;">// \u5C06\u5C04\u7EBF\u6295\u5F71\u5230\u5C4F\u5E55\uFF0C\u5982\u679Cscene.children\u91CC\u7684\u67D0\u4E2A\u6216\u591A\u4E2A\u5F62\u72B6\u76F8\u4EA4\uFF0C\u5219\u8FD4\u56DE\u8FD9\u4E9B\u5F62\u72B6</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#8B949E;">// \u7B2C\u4E8C\u4E2A\u53C2\u6570\u662F\u8BBE\u7F6E\u662F\u5426\u9012\u5F52\uFF0C\u9ED8\u8BA4\u662Ffalse\uFF0C\u5F53scene\u91CC\u9762\u7530\u95F4\u4E86Group\u5BF9\u8C61\u7684\u5B9E\u4F8B\u65F6\uFF0C\u5C31\u9700\u8981\u8BBE\u7F6Etrue</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#8B949E;">// \u7B2C\u4E00\u4E2A\u53C2\u6570\u4E0D\u4F20scene.children\u4E5F\u53EF\u4EE5\uFF0C\u4F20\u4E00\u4E2Agroup.children\u6216\u4E00\u4E2A\u5F62\u72B6\u6570\u7EC4\u90FD\u53EF\u4EE5</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">let</span><span style="color:#C9D1D9;"> intersects </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> raycaster.</span><span style="color:#D2A8FF;">intersectObjects</span><span style="color:#C9D1D9;">(app.scene.children, </span><span style="color:#79C0FF;">true</span><span style="color:#C9D1D9;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#8B949E;">// \u70B9\u51FB\u5230\u7684\u7B2C\u4E00\u4E2A\u5BF9\u8C61</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">return</span><span style="color:#C9D1D9;"> intersects[</span><span style="color:#79C0FF;">0</span><span style="color:#C9D1D9;">]?.object;</span></span>
<span class="line"><span style="color:#C9D1D9;">}</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"></span>
<span class="line"><span style="color:#6E7781;">/**</span></span>
<span class="line"><span style="color:#6E7781;"> * \u901A\u8FC7\u9F20\u6807\u4F4D\u7F6E\u83B7\u53D6\u9F20\u6807\u5BF9\u5E94\u4F4D\u7F6E\u76843d\u7269\u4F53\u5BF9\u8C61</span></span>
<span class="line"><span style="color:#6E7781;"> * </span><span style="color:#CF222E;">@param</span><span style="color:#6E7781;"> </span><span style="color:#24292F;">ev</span><span style="color:#6E7781;"> \u9F20\u6807\u65F6\u95F4</span></span>
<span class="line"><span style="color:#6E7781;"> * </span><span style="color:#CF222E;">@param</span><span style="color:#6E7781;"> </span><span style="color:#24292F;">app</span></span>
<span class="line"><span style="color:#6E7781;"> * </span><span style="color:#CF222E;">@return</span><span style="color:#6E7781;"> </span><span style="color:#953800;">{*}</span></span>
<span class="line"><span style="color:#6E7781;"> */</span></span>
<span class="line"><span style="color:#CF222E;">function</span><span style="color:#24292F;"> </span><span style="color:#8250DF;">getObjByMouse</span><span style="color:#24292F;"> (</span><span style="color:#953800;">ev</span><span style="color:#24292F;">, </span><span style="color:#953800;">app</span><span style="color:#24292F;">) {</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#CF222E;">let</span><span style="color:#24292F;"> { x, y } </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> app.renderer.domElement.</span><span style="color:#8250DF;">getBoundingClientRect</span><span style="color:#24292F;">();</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#CF222E;">let</span><span style="color:#24292F;"> mouseX </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> ((ev.clientX </span><span style="color:#CF222E;">-</span><span style="color:#24292F;"> x) </span><span style="color:#CF222E;">/</span><span style="color:#24292F;"> app.renderer.domElement.clientWidth) </span><span style="color:#CF222E;">*</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">2</span><span style="color:#24292F;"> </span><span style="color:#CF222E;">-</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">1</span><span style="color:#24292F;">;</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#CF222E;">let</span><span style="color:#24292F;"> mouseY </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> </span><span style="color:#CF222E;">-</span><span style="color:#24292F;">((ev.clientY </span><span style="color:#CF222E;">-</span><span style="color:#24292F;"> y) </span><span style="color:#CF222E;">/</span><span style="color:#24292F;"> app.renderer.domElement.clientHeight) </span><span style="color:#CF222E;">*</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">2</span><span style="color:#24292F;"> </span><span style="color:#CF222E;">+</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">1</span><span style="color:#24292F;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#CF222E;">let</span><span style="color:#24292F;"> raycaster;</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#CF222E;">if</span><span style="color:#24292F;"> (app.camera.type </span><span style="color:#CF222E;">===</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">CAMERA_TYPE</span><span style="color:#24292F;">.OrthographicCamera) {</span></span>
<span class="line"><span style="color:#24292F;">        </span><span style="color:#CF222E;">let</span><span style="color:#24292F;"> vector2 </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> </span><span style="color:#CF222E;">new</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">THREE</span><span style="color:#24292F;">.</span><span style="color:#8250DF;">Vector2</span><span style="color:#24292F;">(mouseX, mouseY);</span></span>
<span class="line"><span style="color:#24292F;">        raycaster </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> </span><span style="color:#CF222E;">new</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">THREE</span><span style="color:#24292F;">.</span><span style="color:#8250DF;">Raycaster</span><span style="color:#24292F;">();</span></span>
<span class="line"><span style="color:#24292F;">        raycaster.</span><span style="color:#8250DF;">setFromCamera</span><span style="color:#24292F;">(vector2, app.camera);</span></span>
<span class="line"><span style="color:#24292F;">    } </span><span style="color:#CF222E;">else</span><span style="color:#24292F;"> </span><span style="color:#CF222E;">if</span><span style="color:#24292F;"> (app.camera.type </span><span style="color:#CF222E;">===</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">CAMERA_TYPE</span><span style="color:#24292F;">.PerspectiveCamera) {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292F;">        </span><span style="color:#6E7781;">// \u5148\u6C72\u53D6\u5C4F\u5E55\u4E0A\u70B9\u51FB\u7684\u4F4D\u7F6E\u521B\u5EFA\u4E00\u4E2A\u5411\u91CF</span></span>
<span class="line"><span style="color:#24292F;">        </span><span style="color:#CF222E;">let</span><span style="color:#24292F;"> vector3 </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> </span><span style="color:#CF222E;">new</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">THREE</span><span style="color:#24292F;">.</span><span style="color:#8250DF;">Vector3</span><span style="color:#24292F;">(mouseX, mouseY, </span><span style="color:#0550AE;">0.5</span><span style="color:#24292F;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292F;">        </span><span style="color:#6E7781;">// \u7136\u540E\u7528unproject\u51FD\u6570\u5C06\u70B9\u51FB\u4F4D\u7F6E\u53D1\u5C04\u5149\u7EBF</span></span>
<span class="line"><span style="color:#24292F;">        vector3 </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> vector3.</span><span style="color:#8250DF;">unproject</span><span style="color:#24292F;">(app.camera);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292F;">        </span><span style="color:#6E7781;">// \u7528THREE.Raycaster \u5BF9\u8C61\u5411\u70B9\u51FB\u4F4D\u7F6E\u53D1\u5C04\u5149\u7EBF</span></span>
<span class="line"><span style="color:#24292F;">        raycaster </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> </span><span style="color:#CF222E;">new</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">THREE</span><span style="color:#24292F;">.</span><span style="color:#8250DF;">Raycaster</span><span style="color:#24292F;">(app.camera.position, vector3.</span><span style="color:#8250DF;">sub</span><span style="color:#24292F;">(app.camera.position).</span><span style="color:#8250DF;">normalize</span><span style="color:#24292F;">());</span></span>
<span class="line"><span style="color:#24292F;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#6E7781;">// \u8BA1\u7B97\u5C04\u7EBF\u76F8\u673A\u5230\u7684\u5BF9\u8C61\uFF0C\u53EF\u80FD\u6709\u591A\u4E2A\u5BF9\u8C61\uFF0C\u56E0\u6B64\u8FD4\u56DE\u662F\u4E00\u4E2A\u6570\u7EC4\uFF0C\u6309\u79BB\u76F8\u673A\u8FDC\u8FD1\u6392\u5217</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#6E7781;">// \u5C06\u5C04\u7EBF\u6295\u5F71\u5230\u5C4F\u5E55\uFF0C\u5982\u679Cscene.children\u91CC\u7684\u67D0\u4E2A\u6216\u591A\u4E2A\u5F62\u72B6\u76F8\u4EA4\uFF0C\u5219\u8FD4\u56DE\u8FD9\u4E9B\u5F62\u72B6</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#6E7781;">// \u7B2C\u4E8C\u4E2A\u53C2\u6570\u662F\u8BBE\u7F6E\u662F\u5426\u9012\u5F52\uFF0C\u9ED8\u8BA4\u662Ffalse\uFF0C\u5F53scene\u91CC\u9762\u7530\u95F4\u4E86Group\u5BF9\u8C61\u7684\u5B9E\u4F8B\u65F6\uFF0C\u5C31\u9700\u8981\u8BBE\u7F6Etrue</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#6E7781;">// \u7B2C\u4E00\u4E2A\u53C2\u6570\u4E0D\u4F20scene.children\u4E5F\u53EF\u4EE5\uFF0C\u4F20\u4E00\u4E2Agroup.children\u6216\u4E00\u4E2A\u5F62\u72B6\u6570\u7EC4\u90FD\u53EF\u4EE5</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#CF222E;">let</span><span style="color:#24292F;"> intersects </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> raycaster.</span><span style="color:#8250DF;">intersectObjects</span><span style="color:#24292F;">(app.scene.children, </span><span style="color:#0550AE;">true</span><span style="color:#24292F;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#6E7781;">// \u70B9\u51FB\u5230\u7684\u7B2C\u4E00\u4E2A\u5BF9\u8C61</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#CF222E;">return</span><span style="color:#24292F;"> intersects[</span><span style="color:#0550AE;">0</span><span style="color:#24292F;">]?.object;</span></span>
<span class="line"><span style="color:#24292F;">}</span></span>
<span class="line"></span>
<span class="line"></span></code></pre></div>`,2),e=[o];function c(t,r,y,F,D,i){return a(),n("div",null,e)}const B=s(l,[["render",c]]);export{E as __pageData,B as default};
