import{_ as s,c as n,o as a,a as p}from"./app.2a831956.js";const E=JSON.parse('{"title":"\u83B7\u53D6\u7269\u4F53\u7684\u5C4F\u5E55\u4F4D\u7F6E","description":"","frontmatter":{},"headers":[],"relativePath":"action/position.md","lastUpdated":1692236508000}'),l={name:"action/position.md"},o=p(`<h1 id="\u83B7\u53D6\u7269\u4F53\u7684\u5C4F\u5E55\u4F4D\u7F6E" tabindex="-1">\u83B7\u53D6\u7269\u4F53\u7684\u5C4F\u5E55\u4F4D\u7F6E</h1><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki vp-code-dark"><code><span class="line"></span>
<span class="line"><span style="color:#8B949E;">/**</span></span>
<span class="line"><span style="color:#8B949E;"> * \u901A\u8FC7\u7269\u4F53\u83B7\u53D6\u5177\u4F53\u5C4F\u5E55\u4F4D\u7F6E</span></span>
<span class="line"><span style="color:#8B949E;"> * </span><span style="color:#FF7B72;">@param</span><span style="color:#8B949E;"> </span><span style="color:#C9D1D9;">obj</span></span>
<span class="line"><span style="color:#8B949E;"> * </span><span style="color:#FF7B72;">@param</span><span style="color:#8B949E;"> </span><span style="color:#C9D1D9;">app</span></span>
<span class="line"><span style="color:#8B949E;"> * </span><span style="color:#FF7B72;">@return</span><span style="color:#8B949E;"> </span><span style="color:#FFA657;">{{x: number, y: number}}</span></span>
<span class="line"><span style="color:#8B949E;"> */</span></span>
<span class="line"><span style="color:#FF7B72;">function</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">getPosByObj</span><span style="color:#C9D1D9;"> (</span><span style="color:#FFA657;">obj</span><span style="color:#C9D1D9;">, </span><span style="color:#FFA657;">app</span><span style="color:#C9D1D9;">) {</span></span>
<span class="line"><span style="color:#C9D1D9;">    app.scene.</span><span style="color:#D2A8FF;">updateMatrixWorld</span><span style="color:#C9D1D9;">(</span><span style="color:#79C0FF;">true</span><span style="color:#C9D1D9;">);</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">const</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">worldVector</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">new</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">THREE</span><span style="color:#C9D1D9;">.</span><span style="color:#D2A8FF;">Vector3</span><span style="color:#C9D1D9;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#8B949E;">// \u5148\u8F6C\u4E16\u754C\u5750\u6807</span></span>
<span class="line"><span style="color:#C9D1D9;">    obj.</span><span style="color:#D2A8FF;">getWorldPosition</span><span style="color:#C9D1D9;">(worldVector);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#8B949E;">// \u8F6C\u6210\u8BBE\u5907\u5750\u6807</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">const</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">stdVector</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> worldVector.</span><span style="color:#D2A8FF;">project</span><span style="color:#C9D1D9;">(app.camera);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">const</span><span style="color:#C9D1D9;"> { </span><span style="color:#79C0FF;">width</span><span style="color:#C9D1D9;">, </span><span style="color:#79C0FF;">height</span><span style="color:#C9D1D9;"> } </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">getWH</span><span style="color:#C9D1D9;">();</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">const</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">a</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> width </span><span style="color:#FF7B72;">/</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">2</span><span style="color:#C9D1D9;">;</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">const</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">b</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> height </span><span style="color:#FF7B72;">/</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">2</span><span style="color:#C9D1D9;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#8B949E;">// \u8F6C\u6210\u5C4F\u5E55\u5750\u6807</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">const</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">x</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> Math.</span><span style="color:#D2A8FF;">round</span><span style="color:#C9D1D9;">(stdVector.x </span><span style="color:#FF7B72;">*</span><span style="color:#C9D1D9;"> a) </span><span style="color:#FF7B72;">+</span><span style="color:#C9D1D9;"> a;</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">const</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">y</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> Math.</span><span style="color:#D2A8FF;">round</span><span style="color:#C9D1D9;">(</span><span style="color:#FF7B72;">-</span><span style="color:#C9D1D9;">stdVector.y </span><span style="color:#FF7B72;">*</span><span style="color:#C9D1D9;"> b) </span><span style="color:#FF7B72;">+</span><span style="color:#C9D1D9;"> b;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">return</span><span style="color:#C9D1D9;"> {</span></span>
<span class="line"><span style="color:#C9D1D9;">        x,</span></span>
<span class="line"><span style="color:#C9D1D9;">        y,</span></span>
<span class="line"><span style="color:#C9D1D9;">    };</span></span>
<span class="line"><span style="color:#C9D1D9;">}</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><pre class="shiki vp-code-light"><code><span class="line"></span>
<span class="line"><span style="color:#6E7781;">/**</span></span>
<span class="line"><span style="color:#6E7781;"> * \u901A\u8FC7\u7269\u4F53\u83B7\u53D6\u5177\u4F53\u5C4F\u5E55\u4F4D\u7F6E</span></span>
<span class="line"><span style="color:#6E7781;"> * </span><span style="color:#CF222E;">@param</span><span style="color:#6E7781;"> </span><span style="color:#24292F;">obj</span></span>
<span class="line"><span style="color:#6E7781;"> * </span><span style="color:#CF222E;">@param</span><span style="color:#6E7781;"> </span><span style="color:#24292F;">app</span></span>
<span class="line"><span style="color:#6E7781;"> * </span><span style="color:#CF222E;">@return</span><span style="color:#6E7781;"> </span><span style="color:#953800;">{{x: number, y: number}}</span></span>
<span class="line"><span style="color:#6E7781;"> */</span></span>
<span class="line"><span style="color:#CF222E;">function</span><span style="color:#24292F;"> </span><span style="color:#8250DF;">getPosByObj</span><span style="color:#24292F;"> (</span><span style="color:#953800;">obj</span><span style="color:#24292F;">, </span><span style="color:#953800;">app</span><span style="color:#24292F;">) {</span></span>
<span class="line"><span style="color:#24292F;">    app.scene.</span><span style="color:#8250DF;">updateMatrixWorld</span><span style="color:#24292F;">(</span><span style="color:#0550AE;">true</span><span style="color:#24292F;">);</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#CF222E;">const</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">worldVector</span><span style="color:#24292F;"> </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> </span><span style="color:#CF222E;">new</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">THREE</span><span style="color:#24292F;">.</span><span style="color:#8250DF;">Vector3</span><span style="color:#24292F;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#6E7781;">// \u5148\u8F6C\u4E16\u754C\u5750\u6807</span></span>
<span class="line"><span style="color:#24292F;">    obj.</span><span style="color:#8250DF;">getWorldPosition</span><span style="color:#24292F;">(worldVector);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#6E7781;">// \u8F6C\u6210\u8BBE\u5907\u5750\u6807</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#CF222E;">const</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">stdVector</span><span style="color:#24292F;"> </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> worldVector.</span><span style="color:#8250DF;">project</span><span style="color:#24292F;">(app.camera);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#CF222E;">const</span><span style="color:#24292F;"> { </span><span style="color:#0550AE;">width</span><span style="color:#24292F;">, </span><span style="color:#0550AE;">height</span><span style="color:#24292F;"> } </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> </span><span style="color:#8250DF;">getWH</span><span style="color:#24292F;">();</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#CF222E;">const</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">a</span><span style="color:#24292F;"> </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> width </span><span style="color:#CF222E;">/</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">2</span><span style="color:#24292F;">;</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#CF222E;">const</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">b</span><span style="color:#24292F;"> </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> height </span><span style="color:#CF222E;">/</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">2</span><span style="color:#24292F;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#6E7781;">// \u8F6C\u6210\u5C4F\u5E55\u5750\u6807</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#CF222E;">const</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">x</span><span style="color:#24292F;"> </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> Math.</span><span style="color:#8250DF;">round</span><span style="color:#24292F;">(stdVector.x </span><span style="color:#CF222E;">*</span><span style="color:#24292F;"> a) </span><span style="color:#CF222E;">+</span><span style="color:#24292F;"> a;</span></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#CF222E;">const</span><span style="color:#24292F;"> </span><span style="color:#0550AE;">y</span><span style="color:#24292F;"> </span><span style="color:#CF222E;">=</span><span style="color:#24292F;"> Math.</span><span style="color:#8250DF;">round</span><span style="color:#24292F;">(</span><span style="color:#CF222E;">-</span><span style="color:#24292F;">stdVector.y </span><span style="color:#CF222E;">*</span><span style="color:#24292F;"> b) </span><span style="color:#CF222E;">+</span><span style="color:#24292F;"> b;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292F;">    </span><span style="color:#CF222E;">return</span><span style="color:#24292F;"> {</span></span>
<span class="line"><span style="color:#24292F;">        x,</span></span>
<span class="line"><span style="color:#24292F;">        y,</span></span>
<span class="line"><span style="color:#24292F;">    };</span></span>
<span class="line"><span style="color:#24292F;">}</span></span>
<span class="line"></span>
<span class="line"></span></code></pre></div>`,2),e=[o];function c(t,r,y,F,D,i){return a(),n("div",null,e)}const d=s(l,[["render",c]]);export{E as __pageData,d as default};
