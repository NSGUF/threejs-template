import{d as e,r as t,c as n,o as s,f as r,n as o,C as a,V as i}from"./vendor.63663422.js";import{V as l,R as c,p as u,S as d,q as _,W as f,G as v,r as m,s as h,M as p,L as w,B as g,t as E,u as y,v as b,w as T,x as C,y as I,g as x,l as S,i as L,a as O,o as A,m as R}from"./three.module.18d565c0.js";import{e as j}from"./tween.esm.aafbca96.js";import{l as k,L as P}from"./LottieLoader.e332ea12.js";import{n as B}from"./index.553d5c6b.js";const F={normal:"running",offline:"offline"},G={[F.normal]:"normal",[F.offline]:"offline"},M={SCALE_BIG:"SCALE_BIG",TO_LEFT:"TO_LEFT",TO_RIGHT:"TO_RIGHT",NO_ACTION:"NO_ACTION"},N=[M.TO_RIGHT,M.TO_LEFT],z=880,W=650;function H(){return(window.innerWidth||document.documentElement.clientWidth)<1719}function D(){return H()?{width:704,height:520}:{width:z,height:W}}const Y=1122644,K=3029576,$=2568786,q=6450820,V=1975353,X=789516,J=6844039,Q=30770,U=1581110,Z=16777215,ee=()=>{};const te="OrthographicCamera",ne="PerspectiveCamera";function se(e,t){var n;let s,{x:r,y:o}=t.renderer.domElement.getBoundingClientRect(),a=(e.clientX-r)/t.renderer.domElement.clientWidth*2-1,i=-(e.clientY-o)/t.renderer.domElement.clientHeight*2+1;if(t.camera.type===te){let e=new l(a,i);s=new c,s.setFromCamera(e,t.camera)}else if(t.camera.type===ne){let e=new u(a,i,.5);e=e.unproject(t.camera),s=new c(t.camera.position,e.sub(t.camera.position).normalize())}return null==(n=s.intersectObjects(t.scene.children,!0)[0])?void 0:n.object}let re,oe,ae,ie,le,ce,ue=[],de=null,_e=[],fe=0,ve=[],me=null,he=null;let pe=null;function we(e,t,n){return{x:e,y:t,z:n}}function ge(e=0,t=0,n=0,s,r){let{x:o=0,y:a=0,z:i=0}=s,l=r||new y({color:K,roughness:.5,metalness:.3}),c=new T(e,t,n),u=new p(c,l);return u.position.set(o,a,i),u}function Ee(e){const t=new v,n=40,s=30,r=100;let o=new v;o.position.set(0,0,0),o.name="cabGroup";let a=new v,i=ge(n,2,s,we(0,1,0)),l=[4,2,4],c=ge(...l,we(-18,-1,-13)),d=ge(...l,we(18,-1,-13)),_=ge(...l,we(-18,-1,13)),f=ge(...l,we(18,-1,13));a.add(i,c,d,_,f);let m=ge(2,r,s,we(19,52,0)),h=ge(2,r,s,we(-19,52,0)),p=ge(36,r,2,we(0,52,-14)),b=new v,T=ge(42,3,s,we(0,102,0)),C=ge(44,2,34,we(0,104,0));const I=new w({color:$}),x=[];x.push(new u(-22,103,17)),x.push(new u(22,103,17));const S=(new g).setFromPoints(x),L=new E(S,I);b.add(T,C,L),o.add(a,m,h,p,b);let O=function({rl:e,h:t,position:n,thick:s}){let{x:r=0,y:o=0,z:a=0}=n,i=new y({transparent:!0,opacity:.2,color:q}),l=new y({color:V,roughness:.5,metalness:.3}),c=new v;c.position.set(r+20,o,a+15);let u=ge(e,t,1,we(-e/2,t/2,.5),i),d=ge(s,t,1,we(-2,t/2,.5),l),_=ge(s,t,1,we(-e,t/2,.5),l),f=ge(e,s,1,we(-e/2-1,t,.5),l),m=ge(e,s,1,we(-e/2-1,1,.5),l);return setTimeout((()=>{new j.Tween(c.rotation).to({y:.8*Math.PI},0).easing(j.Easing.Elastic.Out).start()}),0),c.add(u,d,_,f,m),c}({rl:n,h:r,position:we(0,0,0),thick:2});return t.add(o,O),{animate:ye(e),obj:t}}function ye(e){let t=0,n=!1;return function(){if(M.SCALE_BIG===e&&oe&&t<1?(t+=.1,t>1&&(t=1,le()),oe.scale.set(t,t,t)):M.SCALE_BIG!==e&&(t=1,oe.scale.set(t,t,t)),N.includes(e)&&!n){n=!0;let t=e===M.TO_LEFT?-1:1;new j.Tween(oe.rotation).to({y:t*Math.PI*2},300).start()}}}function be(e,t){let n=new T(36,7,26),s=new C({color:X,emissive:X}),r=new p(n,s);r.position.set(0,e,2),r.name="server"+t;let o=new I(36,7),a=new p(o,new x({map:(new S).load("./assets/server.e7edc220.png")}));return a.name="server"+t,a.position.set(0,e,15.1),{serverBody:r,serverPanel:a}}function Te(e){var t;return(null==(t=ve[e])?void 0:t.sf_host_status)!==F.normal}function Ce(e,t){let n=new I(2,2),s=Te(t)?J:Q;const r=new x({color:s,side:L}),o=new p(n,r);return o.position.set(-16.5,e,15.2),o.name="server"+t,o}function Ie(e,t){const n=new g,s=new Float32Array(72);let r=0;for(let a=0;a<8;a++)for(let t=0;t<3;t++)if(Math.random()<.5){const n=-11+a/8*26,o=e-t/3*6,i=15.2;s[3*r]=n,s[3*r+1]=o,s[3*r+2]=i,r++}n.setAttribute("position",new O(s,3)),n.name="server"+t;const o=new A({size:1.5,color:U});return new R(n,o)}function xe(e,t){let n=1;const s=[0,120/255,50/255],r=[20/255,1,60/255];return()=>{let o=n,a=o;e.forEach(((n,i)=>{var l;if(Te(Ae(n)))return;let c=n.material,{r:u,g:d,b:_}=c.color;const f=[u,d,_];function v(e){return f[e]+.04*(r[e]-s[e])*o}let m=[v(0),v(1),v(2)];if(c.color.setRGB(...m),i%2==0){let e=null==(l=t[i/2])?void 0:l.material;e&&e.color.setRGB(...m)}i===e.length-1&&(a=v(0)>r[0]||v(0)<s[0]?-1*o:o)})),n=a}}function Se(){var e,t,n;null==(e=j)||e.update(),null==(t=null==re?void 0:re.controls)||t.update(),null==(n=null==re?void 0:re.stats)||n.update(),null==ue||ue.forEach((e=>null==e?void 0:e())),de=requestAnimationFrame(Se),null==re||re.renderer.render(re.scene,re.camera)}function Le(e){const{width:t,height:n}=D();e.setSize(t,n)}function Oe(e){e.preventDefault();let t=se(e,re);(null==t?void 0:t.name.includes("server"))&&(fe=Ae(t),ie(fe))}function Ae(e){return Number(null==e?void 0:e.name.replace("server",""))||0}function Re(e){var t;if(e.preventDefault(),!re)return;let n=se(e,re);(null==n?void 0:n.name.includes("server"))?(pe.style.cursor="pointer",fe=Ae(n),Ge(fe),je()):n||he||ke(),(null==n?void 0:n.name.includes("server"))||(pe.style.cursor="default"),null==(t=null==re?void 0:re.controls)||t.update()}const je=()=>{he&&(clearInterval(he),he=null)},ke=()=>{je(),he=window.setInterval(Pe,7e3)};const Pe=()=>{fe++,fe=fe>=ce?0:fe,Ge(fe)};function Be(e){var t;let n=_e[e];if(!n)return;const{x:s,y:r}=function(e,t){t.scene.updateMatrixWorld(!0);const n=new u;e.getWorldPosition(n);const s=n.project(t.camera),{width:r,height:o}=D(),a=r/2,i=o/2;return{x:Math.round(s.x*a)+a,y:Math.round(-s.y*i)+i}}(null==(t=null==n?void 0:n.children)?void 0:t[3],re);!function(e,t){let n=document.getElementById("serverInfo");if(!n)return;n.style.display="block";let{height:s}=n.getBoundingClientRect();s=H()?s/.65:s,n.style.top=t-s-15+"px",n.style.left=40+e+"px"}(s,r)}function Fe(){let e=document.getElementById("serverInfo");e&&(e.style.display="none")}function Ge(e){var t;_e.length&&(ae(e),_e.forEach((e=>{new j.Tween(e.position).to({z:0},200).start().onComplete((()=>{Fe()}))})),new j.Tween(null==(t=_e[e])?void 0:t.position).to({z:12},200).start().onComplete((()=>{Be(e)})))}function Me(){var e,t,n,s,r,o;re&&(re.renderer.domElement.removeEventListener("click",Oe,!1),window.removeEventListener("mousemove",Re,!1),window.removeEventListener("resize",ze,!1),Fe(),_e=[],oe=null,ce=0,fe=0,(e=re)&&(null==(n=null==(t=e.renderer)?void 0:t.domElement)||n.remove(),null==(s=e.stats)||s.domElement.remove(),null==(r=e.gui)||r.domElement.remove(),null==(o=e.scene)||o.traverse((e=>{e.material&&e.material.dispose(),e.geometry&&e.geometry.dispose()})),e.renderer.forceContextLoss(),e.renderer.dispose(),e.scene.clear(),e.scene=null,e.camera=null,e.controls=null,e.renderer.domElement=null,e.renderer=null),re=null,de&&(cancelAnimationFrame(de),de=null),je())}function Ne(e,t,n=-1){ve=e,function(e){fe=e}(n),me&&(window.clearTimeout(me),me=null),me=setTimeout(Pe,500),ke(),Fe(),ce=e.length||0,oe&&(re.scene.remove(oe),oe=null);let s=Ee(t),r=function(e){const t=[],n=[],s=[];let r=7.4*(13+e)/2;for(let o=0;o<e;o++){let e=new v;e.position.set(0,0,0);const{serverBody:a,serverPanel:i}=be(r,o),l=Ce(r-1.5,o),c=Ce(r+1.5,o);let u;u=Ie(r+1.5,o),e.add(u),s[o]=u,n.push(l,c),r-=7.4,e.add(a,i,l,c),t.push(e)}return{animate:xe(n,s),obj:t}}(ce);_e=r.obj,oe=s.obj,_e.forEach((e=>oe.add(e))),ue[1]=s.animate,ue[2]=r.animate,re.scene.add(oe)}function ze(){re&&(Le(re.renderer),re.camera.updateProjectionMatrix(),re.renderer.render(re.scene,re.camera),Be(fe))}function We({el:e,serverList:t,listeners:n,currentIndex:s=-1}){ae=(null==n?void 0:n.onChangeIndex)||ee,ie=(null==n?void 0:n.onClickServer)||ee,le=(null==n?void 0:n.onScaleFinish)||ee,pe=e,re=function(e){const t=6.6,n=new u(0,45,0),s=new d,r=new _(z/-6.6,z/t,W/t,W/-6.6,1,480);r.position.set(-190,120,200),r.lookAt(n);const o=new f({antialias:!0,alpha:!0,precision:"highp"});return o.setClearAlpha(0),o.setPixelRatio(window.devicePixelRatio),Le(o),e.appendChild(o.domElement),e.style.touchAction="none",{camera:r,scene:s,renderer:o,controls:void 0,stats:void 0,gui:void 0}}(e),function(){let e=new b(Z,1.4);e.position.set(0,-80,300),e.castShadow=!0,re.scene.add(e);let t=new b(Z,.7);t.position.set(-50,-80,-40),t.castShadow=!0,re.scene.add(t);let n=new b(Z,1.5);n.position.set(100,180,-100),n.castShadow=!0,re.scene.add(n)}();let r=function(){let e,t=new v;return window.bodymovin=k,(new P).load("./assets/round.af4ec70f.json",(n=>{n.animation.play();const s=new m(110,110,1,50),r=new h({transparent:!0,opacity:.45,color:Y,emissive:Y,depthWrite:!1,map:n});e=new p(s,r),s.rotateX(-Math.PI/2),t.add(e),re.scene.add(t)})),{animate:function(){e&&(e.rotation.y=3e-4*-new Date)}}}();return ue[0]=r.animate,Ne(t,M.SCALE_BIG,s),Se(),re.renderer.domElement.addEventListener("click",Oe,!1),window.addEventListener("mousemove",Re,!1),window.addEventListener("resize",ze,!1),ke(),re}var He=e({name:"Rack",props:{server:{type:Array,default:()=>[{sf_host_id:8193439782,sf_host_status:"running",sf_host_name:"10.134.91.644"},{sf_host_id:8193439783,sf_host_status:"",sf_host_name:"10.134.91.364"},{sf_host_id:8193439784,sf_host_status:"running",sf_host_name:"10.134.91.654"},{sf_host_id:8193439784,sf_host_status:"running",sf_host_name:"10.134.91.654"},{sf_host_id:8193439784,sf_host_status:"running",sf_host_name:"10.134.91.654"},{sf_host_id:8193439784,sf_host_status:"running",sf_host_name:"10.134.91.654"},{sf_host_id:8193439784,sf_host_status:"running",sf_host_name:"10.134.91.654"},{sf_host_id:8193439784,sf_host_status:"running",sf_host_name:"10.134.91.654"},{sf_host_id:8193439784,sf_host_status:"running",sf_host_name:"10.134.91.654"},{sf_host_id:8193439784,sf_host_status:"running",sf_host_name:"10.134.91.654"},{sf_host_id:8193439784,sf_host_status:"running",sf_host_name:"10.134.91.654"},{sf_host_id:8193439784,sf_host_status:"running",sf_host_name:"10.134.91.654"},{sf_host_id:8193439784,sf_host_status:"running",sf_host_name:"10.134.91.654"},{sf_host_id:8193439784,sf_host_status:"running",sf_host_name:"10.134.91.654"},{sf_host_id:8193439784,sf_host_status:"running",sf_host_name:"10.134.91.654"}]},location:{typr:String,default:""},showAnimation:{type:Boolean,default:!1},delay:{type:Number,default:0}},setup(e){var a;const i=F,l=G,c=t(0),u=13,d=t(!1),_=t((null==(a=e.server[0])?void 0:a.sf_host_id)||"");let f=t([]);const v=n((()=>{const e=f.value.find((e=>e.sf_host_id===_.value));return{sf_host_id:(null==e?void 0:e.sf_host_id)||"",sf_host_name:(null==e?void 0:e.sf_host_name)||"-",sf_host_status:(null==e?void 0:e.sf_host_status)||"-"}})),m=n((()=>{var t;return Math.ceil((null==(t=e.server)?void 0:t.length)/u)})),h=n((()=>0===c.value)),p=n((()=>c.value===m.value-1)),w=n((()=>e.server.length>u)),g=()=>{var t;let n=(null==(t=e.server)?void 0:t.length)-c.value*u;n=n>u?u:n,f.value=[...e.server].splice(c.value*u,n)},E=()=>{};function y(){if(document.getElementById("container")){let t=function(){let t=e.server.findIndex((e=>String(e.sf_host_id)===_.value));c.value=-1===t?0:Math.floor(t/u),g();let n=f.value.findIndex((e=>String(e.sf_host_id)===_.value));return n=-1===n?-1:--n,n}();We({el:document.getElementById("container"),serverList:f.value,currentIndex:t,listeners:{onChangeIndex:function(e){var t,n;_.value=null==(n=null==(t=f.value)?void 0:t[e])?void 0:n.sf_host_id},onClickServer:function(e){var t;null==(t=f.value)||t[e]},onScaleFinish:function(){d.value||o((()=>{d.value=!0}))}}})}}return s((()=>{y()})),r((()=>{Me()})),{serviceType:i,serviceTypeText:l,isFirstRack:h,isLastRack:p,isMultiple:w,currentID:_,onChangeStartNumber:e=>{let t=e||M.NO_ACTION;switch(e){case M.TO_RIGHT:c.value=c.value+1===m.value?c.value:c.value+1;break;case M.TO_LEFT:c.value=0===c.value?c.value:c.value-1}g(),Ne(f.value,t)},jumpToExclusiveService:E,currentServer:v,isCabinetAnimeComplete:d,RACK_OPERATE_TYPE:M}}});const De={};var Ye=B(He,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"center-cabinet"},[n("div",{staticClass:"center-cabinet__content"},[n("div",{attrs:{id:"container"}},[n("div",{staticClass:"center-cabinet__content-dialog-wrap",attrs:{id:"serverInfo"}},[n("div",{staticClass:"center-cabinet__content-dialog-wrap-service-layer ellipsis"},[n("span",[e._v("test")]),n("span",{directives:[{name:"title",rawName:"v-title"}],staticClass:"center-cabinet__content-dialog-wrap-service-name"},[e._v(e._s(e.currentServer.sf_host_name))])]),n("div",{staticClass:"center-cabinet__content-dialog-wrap-service-wrap"},[n("div",{class:`center-cabinet__content-dialog-wrap-service-status--${e.currentServer.sf_host_status}`},[e._v(" "+e._s(e.serviceTypeText[e.currentServer.sf_host_status])+" ")]),n("div",{staticClass:"center-cabinet__content-dialog-wrap-service-jump-to-detail",attrs:{utid:"center-cabinet-dialog-wrap-service-jump-to-detail"},on:{click:function(t){return e.jumpToExclusiveService(e.currentServer)}}},[e._v(" test ")])])])]),e.isMultiple?[n("div",{staticClass:"center-cabinet__left-btn",class:e.isFirstRack?"center-cabinet__left-btn--disabled":"",attrs:{utid:"center-cabinet__left-buttom"},on:{click:function(t){return e.onChangeStartNumber(e.RACK_OPERATE_TYPE.TO_LEFT)}}}),n("div",{staticClass:"center-cabinet__right-btn",class:e.isLastRack?"center-cabinet__right-btn--disabled":"",attrs:{utid:"center-cabinet__right-buttom"},on:{click:function(t){return e.onChangeStartNumber(e.RACK_OPERATE_TYPE.TO_RIGHT)}}})]:e._e()],2)])}),[],!1,Ke,"d63ca5d8",null,null);function Ke(e){for(let t in De)this[t]=De[t]}var $e=function(){return Ye.exports}(),qe=Object.defineProperty,Ve=Object.getOwnPropertyDescriptor;let Xe=class extends i{mounted(){}};Xe=((e,t,n,s)=>{for(var r,o=s>1?void 0:s?Ve(t,n):t,a=e.length-1;a>=0;a--)(r=e[a])&&(o=(s?r(t,n,o):r(o))||o);return s&&o&&qe(t,n,o),o})([a({components:{Rack:$e}})],Xe);const Je={};var Qe=B(Xe,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"rack"},[t("rack")],1)}),[],!1,Ue,"d1461400",null,null);function Ue(e){for(let t in Je)this[t]=Je[t]}var Ze=function(){return Qe.exports}();export{Ze as default};
